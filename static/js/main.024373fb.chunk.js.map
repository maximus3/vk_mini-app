{"version":3,"sources":["views/MainUS.js","views/Main.js","views/Admin.js","App.js","index.js"],"names":["osName","platform","MainUS","id","popout","view_go","fetchedUser","useState","activePanel","setActivePanel","go","e","currentTarget","dataset","to","title","size","level","onClick","data-to","left","IOS","Main","addRec","delRec","poolRecords","records","useEffect","length","secs","sec","push","before","photo_200","src","description","city","first_name","last_name","map","expandable","data-sec","time","indexOf","count","Admin","console","log","el","t","Date","getTime","App","activeView","setActiveView","setUser","setPopout","a","connect","send","user","fetchData","sort","ReactDOM","render","document","getElementById","actionsLayout","actions","autoclose","mode","action","splice","onClose"],"mappings":"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","file":"static/js/main.024373fb.chunk.js","sourcesContent":["import React, { useState } from 'react';\r\nimport { View, Panel, PanelHeader, Group, Div, Button, HeaderButton, Cell } from '@vkontakte/vkui';\r\nimport { platform, IOS } from '@vkontakte/vkui';\r\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\r\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\r\n\r\nconst osName = platform();\r\n\r\nconst MainUS = ({ id, popout, view_go, fetchedUser }) => {\r\n    const [activePanel, setActivePanel] = useState('main');\r\n    \r\n    const go = e => {\r\n        setActivePanel(e.currentTarget.dataset.to);\r\n\t};\r\n\r\n    return (\r\n    <View id={id} activePanel={activePanel} popout={popout}>\r\n    \r\n\t  <Panel id=\"main\">\r\n\t\t<PanelHeader>Бассейн</PanelHeader>\r\n\t\t<Group title=\"Вход\">\r\n            <Div>\r\n              <Cell>\r\n                Данное приложение предназначено для записи в бассейн.\r\n              </Cell>\r\n            </Div>\r\n\t\t\t<Div>\r\n              <Button size=\"xl\" level=\"2\" onClick={view_go} data-to=\"main\">\r\n                Регистрация\r\n              </Button>\r\n              <Button size=\"xl\" level=\"2\" onClick={view_go} data-to=\"admin\">\r\n                Админ-панель\r\n              </Button>\r\n\t\t\t</Div>\r\n\t\t</Group>\r\n        {fetchedUser !== null && (fetchedUser.id === 367693976 || fetchedUser.id === 154785330) &&\r\n          <Div>\r\n            <Button size=\"xl\" level=\"2\" onClick={go} data-to=\"olga\">\r\n              Опа, секретная кнопка\r\n            </Button>\r\n          </Div>\r\n        }\r\n\t  </Panel>\r\n      \r\n      <Panel id=\"olga\">\r\n\t\t<PanelHeader\r\n\t\t\tleft={<HeaderButton onClick={go} data-to=\"main\">\r\n\t\t\t\t{osName === IOS ? <Icon28ChevronBack/> : <Icon24Back/>}\r\n\t\t\t</HeaderButton>}\r\n\t\t>\r\n\t\t\tОленька\r\n\t\t</PanelHeader>\r\n          <Group title=\"Это твое\">\r\n\t\t    <p>\r\n____*##########* <br/>\r\n__*############## <br/>\r\n__################ <br/>\r\n_##################_________*####* <br/>\r\n__##################_____*########## <br/>\r\n__##################___*############# <br/>\r\n___#################*_###############* <br/>\r\n____#################################* <br/>\r\n______############################### <br/>\r\n_______############################# <br/>\r\n________=########################## <br/>\r\n__________######################## <br/>\r\n___________*##################### <br/>\r\n____________*################## <br/>\r\n_____________*############### <br/>\r\n_______________############# <br/>\r\n________________########## <br/>\r\n________________=#######* <br/>\r\n_________________###### <br/>\r\n__________________#### <br/>\r\n__________________### <br/>\r\n___________________# <br/>\r\n            </p>  \r\n          </Group>\r\n\t  </Panel>\r\n      \r\n    </View>\r\n    );\r\n}\r\n\r\nexport default MainUS;","import React, { useState, useEffect } from 'react';\r\nimport { View, Panel, PanelHeader, Group, Cell, Avatar, Div, Button, List } from '@vkontakte/vkui';\r\n\r\nconst Main = ({ id, popout, view_go, fetchedUser, addRec, delRec, poolRecords, records }) => {\r\n    const [activePanel, setActivePanel] = useState('main');\r\n    \r\n    useEffect(() => {\r\n      \r\n    }, [records.length]);\r\n    \r\n    const go = e => {\r\n        setActivePanel(e.currentTarget.dataset.to);\r\n\t};\r\n    \r\n    let secs = []\r\n    for (let sec in poolRecords) {\r\n        secs.push(sec);  \r\n    }\r\n\r\n    return (\r\n    <View id={id} activePanel={activePanel} popout={popout}>\r\n\t  <Panel id=\"main\">\r\n\t\t<PanelHeader>Бассейн</PanelHeader>\r\n\t\t{fetchedUser &&\r\n\t\t<Group title=\"Добро пожаловать!\">\r\n\t\t\t<Cell\r\n\t\t\t\tbefore={fetchedUser.photo_200 ? <Avatar src={fetchedUser.photo_200}/> : null}\r\n\t\t\t\tdescription={fetchedUser.city && fetchedUser.city.title ? fetchedUser.city.title : ''}\r\n\t\t\t>\r\n\t\t\t\t{`${fetchedUser.first_name} ${fetchedUser.last_name}`}\r\n\t\t\t</Cell>\r\n\t\t</Group>}\r\n        \r\n        {records.length > 0 &&\r\n        <Group title=\"Ваши ближайшие записи\">\r\n          <List>\r\n            {records.map((sec) => {\r\n              return (\r\n              <Cell expandable onClick={delRec} data-sec={sec}>\r\n                {`${poolRecords[sec].time}`}\r\n              </Cell>);\r\n            })}\r\n          </List>\r\n        </Group>\r\n        }\r\n        \r\n        {secs.length > 0 &&\r\n        <Group title=\"Открытые записи\">\r\n          <List>\r\n            {secs.map((sec) => {\r\n              if (records.indexOf(sec) === -1 && poolRecords[sec].count > 0)\r\n              return(\r\n              <Cell expandable onClick={addRec} data-sec={sec}>\r\n                {`${poolRecords[sec].count} ${poolRecords[sec].time}`}\r\n              </Cell>);\r\n              return undefined;\r\n            })}\r\n          </List>\r\n        </Group>\r\n        }\r\n\r\n\t\t<Group title=\"Действия\">\r\n          <Div>\r\n            <Button size=\"xl\" level=\"2\" onClick={view_go} data-to=\"mainUS\">\r\n              Выход\r\n            </Button>\r\n          </Div>\r\n\t\t</Group>\r\n\t  </Panel>\r\n    </View>\r\n    );\r\n}\r\n\r\nexport default Main;","import React, { useState } from 'react';\r\nimport { View, Panel, PanelHeader, Group, Div, Button } from '@vkontakte/vkui';\r\n\r\nconst Admin = ({ id, popout, view_go, fetchedUser }) => {\r\n    const [activePanel, setActivePanel] = useState('main');\r\n    \r\n    const go = e => {\r\n        setActivePanel(e.currentTarget.dataset.to);\r\n\t};\r\n\r\n    return (\r\n    <View id={id} activePanel={activePanel} popout={popout}>\r\n    \r\n\t  <Panel id=\"main\">\r\n\t\t<PanelHeader>Админ-панель</PanelHeader>\r\n\t\t<Group title=\"Действия\">\r\n\t\t\t<Div>\r\n\t\t\t\t<Button size=\"xl\" level=\"2\" onClick={go} data-to=\"main\">\r\n\t\t\t\t\tПросмотр сеансов\r\n\t\t\t\t</Button>\r\n                <Button size=\"xl\" level=\"2\" onClick={go} data-to=\"main\">\r\n\t\t\t\t\tДобавить сеанс\r\n\t\t\t\t</Button>\r\n                <Button size=\"xl\" level=\"2\" onClick={go} data-to=\"main\">\r\n\t\t\t\t\tУдалить сеанс\r\n\t\t\t\t</Button>\r\n                <Button size=\"xl\" level=\"2\" onClick={view_go} data-to=\"mainUS\">\r\n\t\t\t\t\tВыход\r\n\t\t\t\t</Button>\r\n\t\t\t</Div>\r\n\t\t</Group>\r\n\t  </Panel>\r\n      \r\n    </View>\r\n    );\r\n}\r\n\r\nexport default Admin;","import React, { useState, useEffect } from 'react';\nimport connect from '@vkontakte/vk-connect';\nimport { Root, ScreenSpinner, Alert } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport ReactDOM from 'react-dom';\n\nimport MainUS from './views/MainUS';\nimport Main from './views/Main';\nimport Admin from './views/Admin';\n\nlet poolRecords = {};\n\nconsole.log('App');\n\n;(function () {\n  \n  let base_data = [\n      [2020, 2, 25, 15, 0, 24],\n      [2020, 2, 25, 19, 0, 2],\n      [2020, 2, 29, 15, 0, 13],\n      [2020, 2, 29, 19, 0, 4],\n      [2020, 3, 1, 15, 0, 4],\n      [2020, 3, 2, 19, 0, 2],\n      [2020, 3, 3, 15, 0, 3],\n      [2020, 3, 4, 19, 0, 1],\n      [2020, 3, 5, 15, 0, 2],\n      [2020, 3, 6, 15, 0, 1],\n      [2020, 3, 6, 19, 0, 1]\n  ];\n    \n  const make_date = el => {\n      let t = new Date(el[0], el[1] - 1, el[2], el[3], el[4]);\n      poolRecords[t.getTime()] = {time: t, count: el[5]};\n      };\n  base_data.map(make_date);\n})()\n\nconst App = () => {\n    const [activeView, setActiveView] = useState('mainUS');\n    const [fetchedUser, setUser] = useState(null);\n    const [popout, setPopout] = useState(<ScreenSpinner size='large' />);\n    const [records, setRecords] = useState([]);\n    \n    //const fetchedUser = {id: 154785330, first_name: \"Максим\", last_name: \"Иванов\" };\n    \n    useEffect(() => {\n      async function fetchData() {\n\t    const user = await connect.send('VKWebAppGetUserInfo');\n\t\tsetUser(user);\n\t\tsetPopout(null);\n        console.log('fetchData completed');\n        console.log(fetchedUser);\n\t  }\n      fetchData();\n    }, [/*count*/]); //Запускается только если изменилось значение переменной count*/\n    \n    const go = e => {\n        setActiveView(e.currentTarget.dataset.to);\n\t};\n    \n    const addRec = e => {\n        let sec = e.currentTarget.dataset.sec\n        setPopout(<ScreenSpinner size='large' />);\n        poolRecords[sec].count -= 1;\n        records.push(sec);\n        records.sort();\n        ReactDOM.render(<App />, document.getElementById('root'));\n        setPopout(null);\n    };\n    \n    const delRec = e => {\n      let sec = e.currentTarget.dataset.sec\n      setPopout(\n          <Alert\n            actionsLayout=\"vertical\"\n            actions={[{\n              title: 'Удалить запись',\n              autoclose: true,\n              mode: 'destructive',\n              action: () => {\n                  poolRecords[sec].count += 1;\n                  records.splice(records.indexOf(sec), 1);\n                  ReactDOM.render(<App />, document.getElementById('root'));\n              },\n            }, {\n              title: 'Отмена',\n              autoclose: true,\n              mode: 'cancel'\n            }]}\n            onClose={setPopout}\n          >\n            <h2>Подтвердите действие</h2>\n            <p>Вы уверены, что хотите удалить запись?</p>\n          </Alert>);        \n    };\n    \n    return (\n      <Root activeView={activeView}>\n        <MainUS id=\"mainUS\" popout={popout} view_go={go} fetchedUser={fetchedUser}/>\n        <Main id=\"main\" popout={popout} view_go={go} fetchedUser={fetchedUser} addRec={addRec} delRec={delRec} poolRecords={poolRecords} records={records}/>\n        <Admin id=\"admin\" popout={popout} view_go={go} fetchedUser={fetchedUser}/>\n      </Root>\n    );\n}\n\nexport default App;\n\n","import 'core-js/features/map';\nimport 'core-js/features/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport connect from '@vkontakte/vk-connect';\nimport App from './App';\n// import registerServiceWorker from './sw';\n\n// Init VK  Mini App\nconnect.send('VKWebAppInit');\n\nconsole.log('index');\n\n// Если вы хотите, чтобы ваше веб-приложение работало в оффлайне и загружалось быстрее,\n// расскомментируйте строку с registerServiceWorker();\n// Но не забывайте, что на данный момент у технологии есть достаточно подводных камней\n// Подробнее про сервис воркеры можно почитать тут — https://vk.cc/8MHpmT\n// registerServiceWorker();\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}